(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{771:function(t,a,r){"use strict";r.r(a);var v=r(18),_=Object(v.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"数据库恢复"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#数据库恢复"}},[t._v("#")]),t._v(" 数据库恢复")]),t._v(" "),r("h2",{attrs:{id:"数据转储"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#数据转储"}},[t._v("#")]),t._v(" 数据转储")]),t._v(" "),r("p",[t._v("数据备份，数据转存是指DBA将整个数据库复制到磁带或另一个磁盘上，保存起来的过程，备用的数据成为后备副本或后援副本。")]),t._v(" "),r("h2",{attrs:{id:"日志文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#日志文件"}},[t._v("#")]),t._v(" 日志文件")]),t._v(" "),r("h3",{attrs:{id:"格式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#格式"}},[t._v("#")]),t._v(" 格式")]),t._v(" "),r("p",[t._v("数据库中每一个事务都会作为数据库的一条记录存储在日志文件中，每条日志记录会保存如下信息:")]),t._v(" "),r("ol",[r("li",[t._v("各个事务的开始标记")]),t._v(" "),r("li",[t._v("各个事务的结束标记")]),t._v(" "),r("li",[t._v("各个事务的所有更新操作")])]),t._v(" "),r("p",[t._v("若以数据库为单位进行存储的话，则会保存")]),t._v(" "),r("ol",[r("li",[t._v("事务标识")]),t._v(" "),r("li",[t._v("被更新的数据块")])]),t._v(" "),r("h3",{attrs:{id:"登记原则"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#登记原则"}},[t._v("#")]),t._v(" 登记原则")]),t._v(" "),r("p",[t._v("登记的次序严格按照事务执行的次序进行，所有的事务都是"),r("strong",[t._v("先写入日志文件，然后再写到数据库")]),t._v("中。")]),t._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),r("p",[t._v("事务执行完成的标识是日志文件中是否存在该事务的结束标记，也就是是否已经commit了。")])]),t._v(" "),r("ul",[r("li",[t._v("写日志文件操作: 把当前更新操作的详细信息记录到日志文件中")]),t._v(" "),r("li",[t._v("写数据库操作: 对数据的修改结果写到数据库中")])]),t._v(" "),r("h2",{attrs:{id:"检查点恢复"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#检查点恢复"}},[t._v("#")]),t._v(" 检查点恢复")]),t._v(" "),r("ul",[r("li",[t._v("在建立检查点之前commit——不管")]),t._v(" "),r("li",[t._v("在发生故障之前commit——redo")]),t._v(" "),r("li",[t._v("在发生故障之前未commit——undo")])]),t._v(" "),r("h2",{attrs:{id:"恢复"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#恢复"}},[t._v("#")]),t._v(" 恢复")]),t._v(" "),r("p",[t._v("引用博客:"),r("a",{attrs:{href:"http://blog.zerorains.top/2021/05/25/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%90%86%E8%AE%BA-%E5%85%AD-%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CLICK HERE"),r("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=_.exports}}]);